# 粮食质量检测

## **一、项目简介**

基于深度学习的粮食质量检测项目，利用图像识别技术自动识别、标记玉米图像中的坏粮和杂质，助力高效开展玉米质量检测任务，提供完整环境搭建与使用流程，便于快速部署。

## **二、项目结构**

**plaintext**

`corn_bad_grain_detection/  
├── config/                 # 配置目录，存放项目配置文件（如日志配置等）  
├── frames/                 # 用于存放图像帧相关文件，如视频拆帧后的图片  
├── model/                  # 模型权重存储目录，保存训练好的模型文件  
├── models/                 # 模型逻辑模块，负责模型加载、测试等功能实现  
├── test/                   # 测试相关目录，可存放测试用例、测试数据等  
├── utils/                  # 通用工具模块，提供图像转换、处理等工具类  
├── data.yaml               # 记录数据集类别信息  
├── main.py                 # 项目主入口 （内嵌前端页面）  
├── output.mp4              # 输出视频文件，可能是检测结果可视化后的视频  
├── README.md               # 项目说明文档（即当前文件，你可按需求完善）  
├── remote_video.mp4        # 输入视频文件，作为检测的数据源  
├── requirements.txt        # Python 依赖清单，记录需通过 pip 安装的包及版本  
├── simhei.ttf              # 字体文件，用于结果可视化时显示中文等  
├── start_streamlit_vk.bat  # 批处理文件，可能用于快速启动该项目（配置conda环境启动）`

## **三、环境搭建**

### **（一）依赖说明**

项目依赖分为 Python 包（记录在 `requirements.txt` ）和可能的系统环境依赖（需根据实际运行需求补充，如 Conda 环境等，若有额外依赖可在手册说明）。

### **（二）安装步骤**

1. **确保 Python 环境就绪**建议使用 Python 3.8+ 版本，先在本地安装好对应 Python 解释器。
2. 用conda创建<自定义名称>环境 
3. **激活环境后 Python 依赖**打开终端（命令行），进入项目根目录（即包含 `requirements.txt` 的目录），执行：
    
    **bash**
    
    `pip install -r requirements.txt`
    
    该命令会自动安装项目所需的 库及对应版本到刚才创建的环境中。
    

## **四、项目启动**

### **（一）本地启动（以 Streamlit 为例，结合 `start_streamlit.bat` 推测）**

1. **激活环境**若使用 Conda 环境，先执行 `conda activate <自定义名称>` 激活；若仅用系统 Python，确保已安装好依赖即可。
2. **启动命令**
    - 方式一：双击 `start_streamlit.bat`（Windows 下，需要修改bat文件内容换成自定义的环境），脚本会自动执行启动命令，可能类似：（端口 `8501` 可按需修改，避免端口冲突）
    - 方式二：手动在终端执行（需要先激活环境）：
        
        **bash**
        
        `streamlit run main.py --server.port 8501`
        
3. **访问项目**命令执行后，终端会输出本地访问地址（一般是 `http://localhost:8501` ），打开浏览器访问该地址，即可进入项目交互界面。

## **五、使用流程**

### **（一）使用流程概述**

1. **数据输入方式**
    - 上传图片：支持单张或多张图片上传上传图片：支持单张或多张图片上传
    - 上传视频：支持视频文件上传，系统将自动抽帧上传视频：支持视频文件上传，系统将自动抽帧
    - 录制视频：
        - 本地摄像头：点击按钮自动调用本机摄像头进行录制本地摄像头：点击按钮自动调用本机摄像头进行录制本地摄像头：点击按钮自动调用本机摄像头进行录制
        - 远程摄像头：支持输入HTTP或RTSP地址连接远程摄像头远程摄像头：支持输入HTTP或RTSP地址连接远程摄像头远程摄像头：支持输入HTTP或RTSP地址连接远程摄像头
2. **数据处理流程**
    - 所有输入的图片或视频抽帧后的图像会自动放入"待识别区域"所有输入的图片或视频抽帧后的图像会自动放入"待识别区域"
    - 点击"开始识别"按钮后，系统会一次性处理待识别区域中的所有图像点击"开始识别"按钮后，系统会一次性处理待识别区域中的所有图像
    - 识别完成后，结果会显示在"识别结果区域"识别完成后，结果会显示在"识别结果区域"
    - 用户可选择将识别结果保存至项目文件夹用户可选择将识别结果保存至项目文件夹
3. **结果展示与记录**
    - 运行日志：系统运行日志将在页面右侧区域实时显示，包含处理过程信息、警告及错误提示
    - 统计分析：检测完成后，页面下方将自动生成统计表格，清晰展示各类别问题玉米粒数量及占比
    - 可视化展示：识别结果区域会以图形化方式标记不同类型的坏粒，便于直观判断质量状况

## **六、补充说明**

- **模型更新**：若需替换 `model/` 里的模型文件，直接替换对应 `.pt` 文件即可（注意模型输入输出需与代码适配，否则可能报错 ）。